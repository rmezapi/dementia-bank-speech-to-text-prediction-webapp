import{a as R}from"/build/_shared/chunk-VZQVWFLO.js";import{i as l,j as b}from"/build/_shared/chunk-2PEHXEOS.js";import{a as F,c as m,f as g,j as h,n as i}from"/build/_shared/chunk-F6ZQP24G.js";import{c as E,e as r}from"/build/_shared/chunk-ADMCF34Z.js";var w=E((s,y)=>{"use strict";var B=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")},n=B();y.exports=s=n.fetch;n.fetch&&(s.default=n.fetch.bind(n));s.Headers=n.Headers;s.Request=n.Request;s.Response=n.Response});var T=r(w());var a=r(F());var e=r(i());function x({transcript:f}){let t=h(),[u,k]=(0,a.useState)(null),[p,v]=(0,a.useState)(null),[d,A]=(0,a.useState)(!0),D=async()=>{let c=new FormData;c.append("transcript",f),t.submit(c,{method:"post",action:"/diagnosis"}),console.log(c),A(!1)};return(0,a.useEffect)(()=>{t.data?.result&&(console.log(t.data.result[0]),k(t.data.result),v(t.data.confidence*100))},[t.data]),(0,e.jsxs)("div",{children:[d&&(0,e.jsx)(l,{onClick:D,children:"Get results!"}),u&&(0,e.jsxs)("p",{children:["Result: ",u]}),p&&(0,e.jsxs)("p",{children:["with ",Number(parseFloat(p).toFixed(2)),"% Confidence"]}),t.state==="submitting"&&(0,e.jsx)("p",{children:"Loading..."}),t.data?.error&&(0,e.jsxs)("p",{children:["Error: ",t.data.error]}),(0,e.jsx)("p",{className:"line",children:" --- "}),!d&&(0,e.jsx)(l,{as:g,to:"/",color:"primary",className:"btn",children:"Take test again"})]})}var P=r(R());var o=r(i());function C(){return[{rel:"stylesheet",href:b}]}function N(){let t=m().state?.transcript;return(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[(0,o.jsx)("h1",{className:"text-4xl font-bold mb-8",children:"Test Results"}),(0,o.jsx)("h2",{children:"  You said: "}),(0,o.jsxs)("p",{className:"text-2xl",children:[" ",t," "]}),(0,o.jsx)("h2",{children:" Your diagnosis: "}),(0,o.jsx)(x,{transcript:t})]})}export{N as default,C as links};
